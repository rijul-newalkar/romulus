<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romulus — The Wolf Den</title>
    <link rel="stylesheet" href="/static/css/wolfden.css">
    <style>
        /* Inline critical: prevent flash of unstyled content */
        body { background: #0d0d1a; color: #e8e8f0; }
    </style>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x1F43A;</text></svg>">
</head>
<body>
    <div class="app">

        <!-- ═══════════════════════════════════════════════════
             HEADER
             ═══════════════════════════════════════════════════ -->
        <header class="header">
            <div class="header-brand">
                <div class="header-logo">&#x1F43A;</div>
                <div>
                    <div class="header-title" id="header-title">Romulus</div>
                    <div class="header-version" id="header-version">v0.1.0</div>
                </div>
            </div>
            <div class="header-status">
                <div class="uptime">
                    <span class="uptime-label">Uptime</span>
                    <span id="uptime-value">0m 0s</span>
                </div>
                <div class="connection-status">
                    <div class="connection-dot" id="connection-dot"></div>
                    <span id="connection-text">Connecting...</span>
                </div>
            </div>
        </header>

        <!-- ═══════════════════════════════════════════════════
             MAIN CONTENT
             ═══════════════════════════════════════════════════ -->
        <div class="main">

            <!-- ─── The Den (Left/Center) ─── -->
            <div class="den-column">
                <div class="panel den-container">
                    <div class="wolf-status-badge" id="wolf-status-badge">
                        <span class="status-icon">&#x1F43A;</span> Resting
                    </div>

                    <div class="den-scene">
                        <div class="den-room">

                            <!-- Floor -->
                            <div class="room-floor"></div>

                            <!-- Window with Moon & Stars -->
                            <div class="room-window">
                                <div class="window-body">
                                    <div class="window-stars">
                                        <div class="star"></div>
                                        <div class="star"></div>
                                        <div class="star"></div>
                                        <div class="star"></div>
                                        <div class="star"></div>
                                    </div>
                                    <div class="window-moon" id="window-moon"></div>
                                </div>
                            </div>

                            <!-- Bookshelf -->
                            <div class="room-bookshelf">
                                <div class="bookshelf-frame">
                                    <div class="bookshelf-row"></div>
                                    <div class="bookshelf-row"></div>
                                    <div class="bookshelf-row"></div>
                                </div>
                                <div class="bookshelf-label" id="bookshelf-label">0 rules</div>
                            </div>

                            <!-- Trophy Wall -->
                            <div class="room-trophies">
                                <div class="trophy" id="trophy-first" data-tooltip="First task completed">
                                    <div class="trophy-icon">&#x2B50;</div>
                                    <div class="trophy-label">First Task</div>
                                </div>
                                <div class="trophy" id="trophy-10" data-tooltip="10 tasks completed">
                                    <div class="trophy-icon">&#x1F3C6;</div>
                                    <div class="trophy-label">10 Tasks</div>
                                </div>
                                <div class="trophy" id="trophy-50" data-tooltip="50 tasks completed">
                                    <div class="trophy-icon">&#x1F451;</div>
                                    <div class="trophy-label">50 Tasks</div>
                                </div>
                                <div class="trophy" id="trophy-rule" data-tooltip="First rule learned">
                                    <div class="trophy-icon">&#x1F4D6;</div>
                                    <div class="trophy-label">Learner</div>
                                </div>
                                <div class="trophy" id="trophy-trust" data-tooltip="Trust score above 80%">
                                    <div class="trophy-icon">&#x1F6E1;&#xFE0F;</div>
                                    <div class="trophy-label">Trusted</div>
                                </div>
                            </div>

                            <!-- Campfire -->
                            <div class="room-campfire">
                                <div class="campfire-glow" id="campfire-glow"></div>
                                <div class="campfire-base">
                                    <div class="campfire-flames">
                                        <div class="flame flame-outer"></div>
                                        <div class="flame flame-mid"></div>
                                        <div class="flame flame-inner"></div>
                                    </div>
                                    <div class="campfire-logs">
                                        <div class="log"></div>
                                        <div class="log"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Dream Cloud -->
                            <div class="dream-cloud" id="dream-cloud">
                                <div class="cloud-shape">
                                    <div class="cloud-text" id="dream-cloud-text">No dreams yet...</div>
                                </div>
                            </div>

                            <!-- THE WOLF -->
                            <div class="wolf-container wolf-state-idle" id="wolf">
                                <div class="wolf-body">
                                    <!-- Ears -->
                                    <div class="wolf-head">
                                        <div class="wolf-ear left"></div>
                                        <div class="wolf-ear right"></div>
                                        <div class="wolf-eyes">
                                            <div class="wolf-eye"></div>
                                            <div class="wolf-eye"></div>
                                        </div>
                                        <div class="wolf-muzzle">
                                            <div class="wolf-nose"></div>
                                        </div>
                                    </div>
                                    <!-- Body -->
                                    <div class="wolf-torso"></div>
                                    <!-- Tail -->
                                    <div class="wolf-tail"></div>
                                    <!-- Legs -->
                                    <div class="wolf-legs">
                                        <div class="wolf-leg"></div>
                                        <div class="wolf-leg"></div>
                                        <div class="wolf-leg"></div>
                                        <div class="wolf-leg"></div>
                                    </div>
                                    <!-- Shadow -->
                                    <div class="wolf-shadow"></div>
                                </div>
                                <!-- Dream Zzz -->
                                <div class="dream-bubbles">
                                    <span class="zzz">z</span>
                                    <span class="zzz">Z</span>
                                    <span class="zzz">Z</span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="panel" style="margin-top: 16px;">
                    <div class="controls-section">
                        <div class="task-input-group">
                            <input type="text"
                                   class="task-input"
                                   id="task-input"
                                   placeholder="Ask Romulus a task..."
                                   autocomplete="off"
                                   spellcheck="false">
                            <button class="btn btn-send" id="send-btn">Send</button>
                        </div>
                        <button class="btn btn-dream" id="dream-btn">&#x1F319; Trigger Dream Cycle</button>
                    </div>

                    <!-- Response area (hidden by default) -->
                    <div class="response-panel" id="response-panel">
                        <div class="response-content" id="response-content"></div>
                        <div class="response-meta" id="response-meta"></div>
                    </div>
                </div>
            </div>

            <!-- ─── Stats Panel (Right) ─── -->
            <div class="stats-column">

                <!-- Score Rings -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title">Core Metrics</span>
                    </div>
                    <div class="score-rings">
                        <!-- Trust Score Ring -->
                        <div class="score-ring">
                            <svg class="ring-svg" viewBox="0 0 80 80">
                                <circle class="ring-bg" cx="40" cy="40" r="32" />
                                <circle class="ring-fill trust"
                                        id="ring-trust"
                                        cx="40" cy="40" r="32"
                                        stroke-dasharray="201.06"
                                        stroke-dashoffset="201.06" />
                                <text class="ring-value" id="ring-value-trust" x="40" y="40">0%</text>
                            </svg>
                            <span class="ring-label">Trust</span>
                        </div>
                        <!-- Fitness Score Ring -->
                        <div class="score-ring">
                            <svg class="ring-svg" viewBox="0 0 80 80">
                                <circle class="ring-bg" cx="40" cy="40" r="32" />
                                <circle class="ring-fill fitness"
                                        id="ring-fitness"
                                        cx="40" cy="40" r="32"
                                        stroke-dasharray="201.06"
                                        stroke-dashoffset="201.06" />
                                <text class="ring-value" id="ring-value-fitness" x="40" y="40">0%</text>
                            </svg>
                            <span class="ring-label">Fitness</span>
                        </div>
                    </div>

                    <!-- Success rate bar -->
                    <div class="success-bar-container">
                        <div class="success-bar-label">
                            <span>Success Rate (7d)</span>
                            <span id="success-rate-value">0%</span>
                        </div>
                        <div class="success-bar">
                            <div class="success-bar-fill" id="success-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Stats Detail -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title">Details</span>
                    </div>
                    <div class="stat-rows">
                        <div class="stat-row">
                            <span class="stat-label">Tasks Completed</span>
                            <span class="stat-value highlight" id="stat-tasks">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Rules Learned</span>
                            <span class="stat-value" id="stat-rules">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Model</span>
                            <span class="stat-value" id="stat-model">--</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Platform</span>
                            <span class="stat-value" id="stat-platform">--</span>
                        </div>
                    </div>
                </div>

                <!-- System Info Tags -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title">System</span>
                    </div>
                    <div class="info-tags">
                        <span class="info-tag">
                            <span class="info-tag-icon">&#x1F4BE;</span> Local-only
                        </span>
                        <span class="info-tag">
                            <span class="info-tag-icon">&#x1F6E1;&#xFE0F;</span> Vigil Active
                        </span>
                        <span class="info-tag">
                            <span class="info-tag-icon">&#x1F319;</span> Dreams Enabled
                        </span>
                        <span class="info-tag">
                            <span class="info-tag-icon">&#x1F4CA;</span> Arena Tracking
                        </span>
                    </div>
                </div>

            </div>
        </div>

        <!-- ═══════════════════════════════════════════════════
             ACTIVITY FEED (Bottom)
             ═══════════════════════════════════════════════════ -->
        <div class="activity-section">
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">Activity Feed</span>
                    <span style="font-size: 11px; color: var(--text-dim);">Auto-refreshes every 5s</span>
                </div>
                <div class="activity-feed" id="activity-feed">
                    <div class="feed-empty">No activity yet. The den is quiet...</div>
                </div>
            </div>
        </div>

    </div>

    <script src="/static/js/wolfden.js"></script>
</body>
</html>
